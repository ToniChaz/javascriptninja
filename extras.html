<!DOCTYPE html>
<html>
    <head>
        <title>JavaScript Extras</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <h1>JavaScript Extras</h1>
        <nav>
            <input type="button" value="Index" onClick="document.location='index.html';return false;" />
        </nav>
        <h2>JavaScript Object Prototypes</h2>
        <p>Every JavaScript object has a prototype. The prototype is also an object.</p>
        <p>All JavaScript objects inherit their properties and methods from their prototype.</p>
        <h2>JavaScript Closures</h2>
        <p>JavaScript variables can belong to the <strong>local</strong> or <strong>global</strong> scope.</p>
        <p>Private variables can be made possible with closures.</p>
        <h2>Global Variables</h2>
        <p>A function can access all variables defined inside the function, like this:</p>
        <pre>
        function myFunction() {
            var a = 4;
            return a * a;
        }
        </pre>
        <p>A local variable can only be used inside the function where it is defined. It is hidden from other functions and other scripting code.</p>
        <p>But a function can also access variables defined outside the function, like this:</p>
        <pre>
        var a = 4;
        function myFunction() {
            return a * a;
        }
        </pre>
        <p>Global variables can be used (and changed) by all scripts in the page (and in the window).</p>
        <i>Variables created without the keyword <strong>var</strong>, are always global, even if they are created inside a function.</i>
        <h2>Variable Lifetime</h2>
        <p>Global variables live as long as your application (your window / your web page) lives.</p>
        <p>Local variables have short lives. They are created when the function is invoked, and deleted when the function is finished.</p>
        <h2>JavaScript Nested Functions</h2>
        <p>All functions have access to the global scope.</p> 
        <p>In fact, in JavaScript, all functions have access to the scope "above" them.</p>
        <p>JavaScript supports nested functions. Nested functions have access to the scope "above" them.</p>
        <p>In this example, the inner function plus() has access to the counter variable in the parent function:</p>
        <pre>
        function add() {
            var counter = 0;
            function plus() {counter += 1;}
            plus();    
            return counter; 
        }            
        </pre>
        <p>This could have solved the counter dilemma, if we could reach the <strong>plus()</strong> function from the outside.</p>
        <p>We also need to find a way to execute <strong>counter = 0</strong> only once.</p>
        <p><strong>We need a closure.</strong></p>
        <h2>JavaScript Closures</h2>
        <p>Remember self-invoking functions? What does this function do?</p>
        <pre>
        var add = (function () {
            var counter = 0;
            return function () {return counter += 1;}
        })();

        add();
        add();
        add();

        // the counter is now 3
        </pre>
        <p>The variable add is assigned the return value of a self invoking function.</p>
        <p>The self-invoking function only runs once. It sets the counter to zero (0), and returns a function expression.</p>
        <p>This way add becomes a function. The "wonderful" part is that it can access the counter in the parent scope.</p>
        <p>This is called a JavaScript closure. It makes it possible for a function to have "private" variables.</p>
        <p>The counter is protected by the scope of the anonymous function, and can only be changed using the add function.</p>
    </body>
</html>